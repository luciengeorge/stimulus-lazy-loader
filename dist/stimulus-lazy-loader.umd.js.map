{"version":3,"file":"stimulus-lazy-loader.umd.js","sources":["../src/index.js"],"sourcesContent":["import {Controller} from '@hotwired/stimulus'\n\nexport default class extends Controller {\n  static targets = ['image', 'root']\n  static values = {\n    rootMargin: String,\n    threshold: Array,\n  }\n\n  connect() {\n    const observer = new IntersectionObserver(\n      (entries, observer) => {\n        entries.forEach((entry) => {\n          entry.target.src = entry.target.dataset.src\n          observer.unobserve(entry.target)\n        })\n      },\n      {root: this.root, rootMargin: this.rootMargin, threshold: this.threshold},\n    )\n    this.imageTargets.forEach((target) => observer.observe(target))\n  }\n\n  get rootMargin() {\n    return this.hasRootMarginValue ? this.rootMarginValue : '0px'\n  }\n\n  get root() {\n    return this.hasRootTarget ? this.rootTarget : null\n  }\n\n  get threshold() {\n    return this.hasThresHoldValue ? this.thresholdValue : [0.0]\n  }\n}\n"],"names":["_default","_Controller","apply","arguments","this","prototype","connect","observer","IntersectionObserver","entries","forEach","entry","target","src","dataset","unobserve","root","rootMargin","threshold","imageTargets","observe","key","get","hasRootMarginValue","rootMarginValue","hasRootTarget","rootTarget","hasThresHoldValue","thresholdValue","Controller","targets","values","String","Array"],"mappings":"6ZAA6CA,IAAAA,wBAAAC,eAAAD,SAAAA,IAAAC,OAAAA,EAAAC,WAAAC,YAAAC,IAAA,CAgC1C,SAhC0CH,KAAAD,yEAAAA,EAAAK,UAS3CC,QAAA,WACE,IAAMC,EAAW,IAAIC,qBACnB,SAACC,EAASF,GACRE,EAAQC,QAAQ,SAACC,GACfA,EAAMC,OAAOC,IAAMF,EAAMC,OAAOE,QAAQD,IACxCN,EAASQ,UAAUJ,EAAMC,OAC3B,EACF,EACA,CAACI,KAAMZ,KAAKY,KAAMC,WAAYb,KAAKa,WAAYC,UAAWd,KAAKc,YAEjEd,KAAKe,aAAaT,QAAQ,SAACE,GAAW,OAAAL,EAASa,QAAQR,EAAO,EAChE,IAACZ,KAAAqB,CAAAA,CAAAA,IAAAC,aAAAA,IAED,WACE,OAAOlB,KAAKmB,mBAAqBnB,KAAKoB,gBAAkB,KAC1D,GAAC,CAAAH,IAAA,OAAAC,IAED,WACE,OAAWlB,KAACqB,cAAgBrB,KAAKsB,WAAa,IAChD,GAACL,CAAAA,IAAAC,YAAAA,IAED,WACE,OAAOlB,KAAKuB,kBAAoBvB,KAAKwB,eAAiB,CAAC,EACzD,mgBAAC5B,CAAA,EA9B0B6B,EAAUA,mBAAA7B,EAC9B8B,QAAU,CAAC,QAAS,QAAO9B,EAC3B+B,OAAS,CACdd,WAAYe,OACZd,UAAWe"}