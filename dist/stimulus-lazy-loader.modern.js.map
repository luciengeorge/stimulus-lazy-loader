{"version":3,"file":"stimulus-lazy-loader.modern.js","sources":["../src/index.js"],"sourcesContent":["import {Controller} from '@hotwired/stimulus'\n\nexport default class extends Controller {\n  static targets = ['image', 'root']\n  static values = {\n    rootMargin: String,\n    threshold: Array,\n  }\n\n  connect() {\n    const observer = new IntersectionObserver(\n      (entries, observer) => {\n        entries.forEach((entry) => {\n          entry.target.src = entry.target.dataset.src\n          observer.unobserve(entry.target)\n        })\n      },\n      {root: this.root, rootMargin: this.rootMargin, threshold: this.threshold},\n    )\n    this.imageTargets.forEach((target) => observer.observe(target))\n  }\n\n  get rootMargin() {\n    return this.hasRootMarginValue ? this.rootMarginValue : '0px'\n  }\n\n  get root() {\n    return this.hasRootTarget ? this.rootTarget : null\n  }\n\n  get threshold() {\n    return this.hasThresHoldValue ? this.thresholdValue : [0.0]\n  }\n}\n"],"names":["_class","Controller","connect","observer","IntersectionObserver","entries","forEach","entry","target","src","dataset","unobserve","root","this","rootMargin","threshold","imageTargets","observe","hasRootMarginValue","rootMarginValue","hasRootTarget","rootTarget","hasThresHoldValue","thresholdValue","targets","values","String","Array"],"mappings":"gDAEe,MAAAA,UAAcC,EAO3BC,OAAAA,GACE,MAAMC,EAAW,IAAIC,qBACnB,CAACC,EAASF,KACRE,EAAQC,QAASC,IACfA,EAAMC,OAAOC,IAAMF,EAAMC,OAAOE,QAAQD,IACxCN,EAASQ,UAAUJ,EAAMC,OAAM,EAChC,EAEH,CAACI,KAAMC,KAAKD,KAAME,WAAYD,KAAKC,WAAYC,UAAWF,KAAKE,YAEjEF,KAAKG,aAAaV,QAASE,GAAWL,EAASc,QAAQT,GACzD,CAEA,cAAIM,GACF,YAAYI,mBAAqBL,KAAKM,gBAAkB,KAC1D,CAEA,QAAIP,GACF,YAAYQ,cAAgBP,KAAKQ,WAAa,IAChD,CAEA,aAAIN,GACF,YAAYO,kBAAoBT,KAAKU,eAAiB,CAAC,EACzD,EACDvB,EA9BQwB,QAAU,CAAC,QAAS,QAAOxB,EAC3ByB,OAAS,CACdX,WAAYY,OACZX,UAAWY"}